<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>食不食油饼</title>
    <link rel="stylesheet" href="css/wz.css">
    <link rel="stylesheet" href="css/home.css">
    <link rel="stylesheet" href="css/about.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/photo.css">
    <style></style>
</head>

<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#home" class="logo-box">
                <img src="image/blog.png" alt="" class="logo-1">
            </a>
            <ul class="nav-links">
                <li><a href="#home" class="nav-link active">主页</a></li>
                <li><a href="#docs" class="nav-link">文档</a></li>
                <li><a href="#gallery" class="nav-link">壁纸</a></li>
                <li><a href="#about" class="nav-link">关于</a></li>
            </ul>
        </div>
    </nav>
    <!-- 页面容器 -->
    <div id="app">
        <!-- 第一页 -->
        <div id="home-page" class="page" style="display: block;">
            <div class="avt">
                <img src="image/mb.jpg" alt="">
                <div class="tt">
                    <div class="tt1">食不食油饼</div>
                    <div class="tt2">与其逼自己一把，不如放自己一马</div>
                    <div class="tt3">曼波~曼波~哦马之里曼波~WoW</div>
                </div>
            </div>
        </div>
        <!-- 第二页 -->
        <div id="docs-page" class="page" style="display: none;">
            <div class="container-wz">
                <div class="tag-search">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="搜索本页...">
                    </div>
                    <div class="tags-container" id="tagsContainer"></div>
                </div>
                <div id="left-column" class="article-list">
                </div>
            </div>
        </div>
        <!-- 第三页 -->
        <div id="gallery-page" class="page" style="display: none;">
            <div class="container-2">
                <dialog id="hdimg" onclick="hdimg.close()">
                    <div class="loading" id="aa"></div>
                    <img id="img-hd" alt="">
                </dialog>
                <div id="pts" class="photos"></div>
            </div>

        </div>
        <!-- 第四页 -->
        <div id="about-page" class="page" style="display: none;">
            <div class="container-a">
                <div>
                    <img src="image/mb.gif" alt="" class="mbgif">
                    <span class="thanks">
                        <p>致谢</p>
                        <a href="https://www.anthropic.com//" target="_blank">Claude</a>
                        <a href="https://yuanbao.tencent.com/" target="_blank">腾讯元宝</a><br>
                        <p>提供免费AI服务</p>
                        <a href="https://github.com/" target="_blank">GitHub</a>
                        <a href="https://aws.amazon.com/" target="_blank">Amazon</a>
                        <a href="https://www.cloudflare.com/" target="_blank">Cloudflare</a><br>
                        <p>提供免费云服务</p>
                    </span>
                </div>
            </div>
        </div>
        <!-- 第五页 -->
    </div>

    <!-- <script src="js/wzlist.js"></script> -->
    <!-- <script src="js/imglist.js"></script> -->
    <script src="js/hdimg.js"></script>

    <script>
        // 路由管理类
        class HashRouter {
            constructor() {
                this.routes = {};
                this.currentPage = null;
                this.init();
            }

            init() {
                window.addEventListener('load', this.handleRouteChange.bind(this));
                window.addEventListener('hashchange', this.handleRouteChange.bind(this));
            }

            addRoute(path, pageId) {
                this.routes[path] = pageId;
            }

            handleRouteChange() {
                // 获取当前路由hash，默认值为home
                const path = window.location.hash.substring(1) || 'home';

                // 隐藏所有页面
                const pages = document.querySelectorAll('.page');
                pages.forEach(page => page.style.display = 'none');

                // 更新导航激活状态
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === path) {
                        link.classList.add('active');
                    }
                });

                // 显示当前路由对应的页面
                const pageId = this.routes[path] || this.routes['home'];
                const currentPage = document.getElementById(pageId);
                if (currentPage) {
                    currentPage.style.display = 'block';
                    this.currentPage = pageId;
                } else {
                    // 如果路由不存在，显示主页
                    document.getElementById(this.routes['home']).style.display = 'block';
                    this.currentPage = this.routes['home'];
                }
            }
        }

        // 初始化路由
        document.addEventListener('DOMContentLoaded', () => {
            const router = new HashRouter();

            // 添加路由
            router.addRoute('home', 'home-page');
            router.addRoute('docs', 'docs-page');
            router.addRoute('gallery', 'gallery-page');
            router.addRoute('about', 'about-page');
        });

        // 初始化加载时执行
        window.addEventListener('load', updateBackground);
        // 监听hash变化
        window.addEventListener('hashchange', updateBackground);
        function updateBackground() {
            const hash = window.location.hash;
            let bgClass = 'bg-1';
            if (hash == '#/' || hash === '#/about') bgClass = 'bg-1';
            else if (hash === '#docs' || hash === '#gallery') bgClass = 'bg-2';
            document.body.className = bgClass;
        }

        // 懒加载图片列表
        // 全局变量，记录是否已加载
        let galleryLoaded = false; 
        let docsLoaded = false;
        window.addEventListener('hashchange', loadGalleryImages);
        function loadGalleryImages() {
            const hash2 = window.location.hash;
            if (hash2 === '#gallery' && !galleryLoaded) {
                const script = document.createElement('script');
                script.src = 'js/imglist.js';
                document.head.appendChild(script);
                galleryLoaded = true;
            }
            else if (hash2 === '#docs' && !docsLoaded) {
                const script = document.createElement('script');
                script.src = 'js/wzlist.js';
                document.head.appendChild(script);
                docsLoaded = true;
            }
        }

    </script>
</body>

</html>